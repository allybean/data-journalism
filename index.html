<!DOCTYPE html>
<html>
<head>
   <title><center>Which States are Using Solar Energy?</center></title>
   <link href='http://fonts.googleapis.com/css?family=Arimo' rel='stylesheet' type='text/css'>
   <script src="https://www.google.com/jsapi"></script>
   <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
   <script src="jquery.csv-0.71.js"></script>
   <script>
   // load the visualization library from Google and set a listener
   google.load("visualization", "1", {packages:["corechart"]});
   google.setOnLoadCallback(drawChart);
   function drawChart() {
      // grab the CSV
      $.get("solardata.csv", function(csvString) {
      // transform the CSV string into a 2-dimensional array
      var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
      // this new DataTable object holds all the data
      var data = new google.visualization.arrayToDataTable(arrayData);
      // this view can select a subset of the data at a time
      var view = new google.visualization.DataView(data);
      view.setColumns([5,2]);
      var options = {
         title: "Comparing The Usable Number Of Days Of Sunlight To Actual Solar Consumption Per Capita in 2012",
         hAxis: {title: data.getColumnLabel(5), minValue: data.getColumnRange(5).min, maxValue: data.getColumnRange(5).max},
         vAxis: {title: data.getColumnLabel(2), minValue: data.getColumnRange(2).min, maxValue: data.getColumnRange(2).max},
         legend: 'none'
      };
      var chart = new google.visualization.ScatterChart(document.getElementById('chart'));
      
      chart.draw(view, options);
      });
   }

      // wait till the DOM is loaded
      $(function() {
         // grab the CSV
         $.get("solardata.csv", function(csvString) {
            // display the contents of the CSV
            //$("#chart").html(csvString);
         });
      });
   </script>
</head>
<body>
   <div id="main">
      <h1 class="big">Which States are Using Solar Power?</h1>   
      
   <div id="chart">
    </div>
    <div class = "center">
    <p>Here's a scatter plot of the number of clear days each US state gets in a year, plotted against the amount of solar energy consumer per capita. </p>
<a href="solardata.csv">Here's the solar data</a>
<p>Sources: <a href="http://www.infoplease.com/ipa/A0004986.html">Population by state</a>,<a href="http://www.currentresults.com/Weather/US/average-annual-state-sunshine.php">Clear days by state</a>, <a href="http://www.eia.gov/state/seds/sep_sum/html/pdf/sum_btu_totcb.pdf">Solar consumption by state</a></p>
</div>
</body>
</html>